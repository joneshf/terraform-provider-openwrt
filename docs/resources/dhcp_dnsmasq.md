---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "openwrt_dhcp_dnsmasq Resource - openwrt"
subcategory: ""
description: |-
  A lightweight DHCP and caching DNS server.
---

# openwrt_dhcp_dnsmasq (Resource)

A lightweight DHCP and caching DNS server.

## Example Usage

```terraform
resource "openwrt_dhcp_dnsmasq" "this" {
  domain            = "testing"
  expandhosts       = true
  id                = "testing"
  local             = "/testing/"
  rebind_localhost  = true
  rebind_protection = true
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `id` (String) Name of the section. This name is only used when interacting with UCI directly.

### Optional

- `authoritative` (Boolean) Force dnsmasq into authoritative mode. This speeds up DHCP leasing. Used if this is the only server on the network.
- `domain` (String) DNS domain handed out to DHCP clients.
- `domainneeded` (Boolean) Never forward queries for plain names, without dots or domain parts, to upstream nameservers.
- `ednspacket_max` (Number) Specify the largest EDNS.0 UDP packet which is supported by the DNS forwarder.
- `expandhosts` (Boolean) Never forward queries for plain names, without dots or domain parts, to upstream nameservers.
- `leasefile` (String) Store DHCP leases in this file.
- `local` (String) Look up DNS entries for this domain from `/etc/hosts`.
- `localise_queries` (Boolean) Choose IP address to match the incoming interface if multiple addresses are assigned to a host name in `/etc/hosts`.
- `localservice` (Boolean) Accept DNS queries only from hosts whose address is on a local subnet.
- `readethers` (Boolean) Read static lease entries from `/etc/ethers`, re-read on SIGHUP.
- `rebind_localhost` (Boolean) Allows upstream 127.0.0.0/8 responses, required for DNS based blocklist services. Only takes effect if rebind protection is enabled.
- `rebind_protection` (Boolean) Enables DNS rebind attack protection by discarding upstream RFC1918 responses.
- `resolvfile` (String) Specifies an alternative resolv file.

## Import

Import is supported using the following syntax:

```shell
# Find the Terraform id from LuCI's JSON-RPC API.
# One way to find this information is with `curl` and `jq`:
#
# curl \
#     --data '{"id": 0, "method": "foreach", "params": ["dhcp", "dnsmasq"]}' \
#     http://192.168.1.1/cgi-bin/luci/rpc/uci?auth=$AUTH_TOKEN \
#     | jq '.result | map({terraformId: .[".name"]})'
#
# This command will output something like:
#
# [
#   {
#     "terraformId": "cfg123456",
#   }
# ]
#
# We'd then use the information to import the appropriate resource:

terraform import openwrt_dhcp_dnsmasq.this cfg123456
```
